<!DOCTYPE html>
<html lang="en">

<head>
    <!-- 初始設定，請自行修改title，及添加js連結 -->
    @@include('layout/head.html')
    <title>服務預約</title>
    
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="css/reserve.css">
    <script src="js/reserve.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-twzipcode@1.7.14/jquery.twzipcode.min.js"></script>
     
</head>
<body>
    <!-- <header></header> -->
    @@include('layout/header.html')
    <div id="tabs" class="container">
        <!-- 進度條 -->
        <div class="progress">
            <a v-bind:class="[ activetab === '1' ? 'active' : '' ]">預約表單</a>
            <a v-bind:class="[ activetab === '2' ? 'active' : '' ]">訂金付款</a>
            <a v-bind:class="[ activetab === '3' ? 'active' : '' ]">服務預約明細</a>
        </div>

        <div class="content">
            <div v-if="activetab ==='1'" class="tabcontent">
                <!-- 預約表單 -->
                <form>
                    <!-- 選擇方案 -->
                    <div class="form_item choose_plan">
                        <h3>選擇方案</h3>
                        <div class="plan_li">
                            <li>
                                <input type="radio" v-model="plan" value="到府一對一教學" id="plan0" class="radio-input">
                                <label for="plan0" class="radio-label">
                                    <span class="radio-button"></span>
                                    到府一對一教學
                                </label>
                            </li>
                            <li>
                                <input type="radio" v-model="plan" value="空間整理收納" id="plan1" class="radio-input">
                                <label for="plan1" class="radio-label">
                                    <span class="radio-button"></span>
                                    空間整理收納
                                </label>
                            </li>
                            <li>
                                <input type="radio" v-model="plan" value="搬家前後物品上下架" id="plan2" class="radio-input">
                                <label for="plan2" class="radio-label">
                                    <span class="radio-button"></span>
                                    搬家前後物品上下架
                                </label>
                            </li>
                        </div>
                        <!-- 方案介紹 -->
                        <div class="plan_info" v-show="plan_info">
                            <img src="https://picsum.photos/200/130/?random=10">
                        </div>
                    </div>

                    <!-- 選擇整理師 -->
                    <div class="form_item choose_emp">
                        <h3>選擇整理師</h3>
                        <select v-model="selectedEmp">
                            <option value="" disabled>請選擇</option>
                            <option v-for="emp in emps">{{emp}}</option>
                        </select>
                        <!-- 整理師介紹 -->
                        <div class="emp_info" v-show="emp_info">
                            <img src="">
                            <p>{{selectedEmp}}</p>
                        </div>
                    </div>


                    <!-- 選擇日期 -->
                    <div class="form_item choose_date">
                        <h3>選擇日期</h3>
                        <!-- 月曆 -->
                        <div id="calendari"></div>
                    </div>

                    <!-- 姓名 -->
                    <div class="form_item">
                        <h3>姓名</h3>
                        <input type="text" v-model="name">
                    </div>
                    <!-- 電話 -->
                    <div class="form_item">
                        <h3>電話</h3>
                        <input type="text" v-model="tel">
                    </div>
                    <!-- email -->
                    <div class="form_item">
                        <h3>email</h3>
                        <input type="email" v-model="email">
                    </div>
                    <!-- 地址 -->
                    <div class="form_item">
                        <h3>地址</h3>
                        <!-- <div id="twzipcode"></div> -->
                        <input type="text" placeholder="請輸入地址">
                        <p id="add"></p>
                    </div>
                    <!-- 需求 -->
                    <div class="form_item">
                        <h3>需求</h3>
                        <textarea name="" id="" cols="50" rows="5"></textarea>
                    </div>
                    <!-- 上傳照片 -->
                    <div class="form_item upload_pics">
                        <p>上傳照片讓我們了解您想改善的空間<br>(最多上傳3張,僅支援格式 jpg /png)</p>
                        <div class="your_pics">


                        </div>
                    </div>
                

                </form>
                <button v-on:click="activetab='2'">下一步</button>    
            </div>
            <div v-if="activetab ==='2'" class="tabcontent">
                <table class="creditCard">
                    <tr>
                        <td>信用卡:</td>
                        <td colspan="2">
                            <input type="radio" name="payment" value="Visa" id="visa" />Visa &nbsp;
                            <input type="radio" name="payment" value="Master Card" />Master Card &nbsp;
                            <input type="radio" name="payment" value="American Express" />American Express &nbsp;
                            <input type="radio" name="payment" value="Discover" />Discover <br />
                            <label>Card Number:</label>
                            <input type="text" name="cardNumber" id="cardNum" size="30" value="" v-model="credit_card" maxlength="16"
                                onblur="ValidateCreditCardNumber()" /></td>
                    </tr>
                    <tr>
                        <td>信用卡到期日:</td>
                        <td>
                            <select name="年" v-model="selectedYear">
                                <option v-for="year in years">{{year}}年</option>
                            </select>
                        </td>
                        <td>
                            <select name="月份"  v-model="selectedMonth" @change="changeDays">
                                <option v-for="month in 12">{{month}}月</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>收貨人姓名:</td>
                        <td><input type="text" v-model="name"></td>
                    </tr>
                    <tr>
                        <td rowspan="2">收貨地址:</td>
                        <td><input size="25" v-model="address1"></td>
                    </tr>
                    <tr>
                        <td><input size="25" v-model="address2"></td>
                    </tr>
                    <tr>
                        <td><button v-on:click="activetab='1'">返回</button>
                        <td></td></td>
                        <td><button v-on:click="activetab='3'">下一步</button></td>
                    </tr>
                </table>
            </div>
            <div v-if="activetab ==='3'" class="tabcontent">
                <table>
                    <tr>
                        <td>信用卡明細</td>
                        <td>{{credit_card}}</td>
                    </tr>
                    <tr>
                        <td>預約人姓名</td>
                        <td>{{name}}</td>
                    </tr>
                    <tr>
                        <td>訂金金額</td>
                        <td>{{total}}</td>
                    </tr>
                    <tr>
                        <td>方案</td>
                        <td>{{plan}}</td>
                    </tr>
                    <tr>
                        <td>預約整理師</td>
                        <td>{{emp}}</td>
                    </tr>
                    
                    <tr>
                        <td><button v-on:click="activetab='2'">返回</button></td>
                        <td><button>送出</button></td>
                    </tr>
                </table>
            </div>
        </div>

    </div>
<!-- <footer></footer> -->
@@include('layout/footer.html')           
</body>
<script>
    function ValidateCreditCardNumber(){

var ccNum = document.getElementById("cardNum").value;

var visaRegEx = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;
var mastercardRegEx = /^(?:5[1-5][0-9]{14})$/;
var amexpRegEx = /^(?:3[47][0-9]{13})$/;
var discovRegEx = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/; 


if (visaRegEx.test(ccNum) === false ){ // Visa validation
   alert("信用卡卡號錯誤");
    }
if (mastercardRegEx.test(ccNum) === false){ // MasterCard validation
    alert("信用卡卡號錯誤");  
    }
if(amexpRegEx.test(ccNum) === false){ // Amex  validation
    alert("信用卡卡號錯誤");  
    }  
if (discovRegEx.test(ccNum) === false){ // Discover validation
    alert("信用卡卡號錯誤"); 
    }
}
</script>
<script>
    new Vue({
        el: '#tabs',
        data: {
            activetab: '1',
            message: '',
            address: '',
            credit_card: '',
            plan: '到府一對一教學',//預設
            name:'',
            coupon:'',
            count: 1,
            price: 3200,
            image: 'images/3341.gif',
            emps: ["麻里不會","末牛子","潔癖子","由收easy安排"],
            selectedEmp: '',
            tel: '',
            email: '',
            
        },
        methods: {
        },
        computed: {
            total() {
                return parseInt(this.price) * parseInt(this.count)
            },
            product() {
                return parseInt(this.count)
            },
            plan_info() {
                return this.plan;
            },
            emp_info() {
                return this.selectedEmp;           
            },
            
        },
    });
</script>
<script>
$(document).ready(function(){
    $("#twzipcode").twzipcode({
        zipcodeIntoDistrict: true, // 郵遞區號自動顯示在區別選單中
        css: ["county", "district"], // 自訂 "城市"、"地別" class 名稱 
        onCountySelect: function() {
            //county = $("select[name='county']").val();  // 取縣市的值
            $add = $("#add");
            $add.innerText = county;
        },
        onDistrictSelect: function() {//  選擇鄉鎮市區後執行
            district = $("select[name='district']").val();  // 取鄉鎮市區的值
        },  
    });
});

</script>
</html>