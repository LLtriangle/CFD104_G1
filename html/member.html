<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @@include('layout/head.html')
    <title>會員專區</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/member.css">
</head>
<body>
    @@include('layout/header.html')
    <main  id="mem_data">
        <!-- 會員功能欄開始 ---------------------------->
        <section class="data_column">
            <!-- 功能欄--各細項 data_button ------------------>
            <div class="data_button">
                <input type="checkbox" id="m_data">
                <label for="m_data" class="id">
                    <div class="mem">
                        <div class="mem_icon">
                            <img :src="cus_pic">
                        </div>
                        <div class="mem_p">
                            <!-- 名字 -->
                            <p>{{cusRow.CUS_NAME}}</p>
                            <!-- email -->
                            <p>{{cusRow.EMAIL}}</p>
                        </div>
                        <img src="img/memupupdowndown.png" alt="" class="up_down">
                    </div>
                </label>
                <div class="con_data">
                    <a @click="data=true,p_order=false">會員資料</a><br>
                    <a @click="data=false,p_order=true">商品訂單</a><br>
                    <a @click="data=false,p_order=true">服務預約</a><br>
                    <a @click="data=false,p_order=true">收藏清單</a><br>
                    <a id="btnLogout">登出</a>
                </div>
            </div>
        </section>
        <!-- 會員功能欄結束 ---------------------------->

        <!-- 會員資料顯示開始 -------------------------->
        <section class="data_con">
            <!-- 資料區的頭上槓槓 -->
            <div class="title_color"></div>
            <!-- 資料區的內容盒子 data_mem------------------>
            <form id="myForm">
                <div class="data_mem" v-if="data">
                    <div class="icon_edit">
                        <div class="mem_icon" >
                                <!-- 大頭貼 -->
                                <img id="myImg" :src="cus_pic">
                                <input type="file" name="upFile" id="upFile" accept="image/jpeg, image/png" >
                                <label id="btnUpload" class="btn_btn br" for="upFile">編輯大頭貼
                                </label>
                        </div>
                    </div>
                    <!-- 氣氣氣table -->
                    <!-- 不是table -->
                    <div class="mem_txt">
                        <div class="item_box">
                            <label><p> &emsp; &emsp;姓名
                                <input id="cus_name" name="cus_name" class='member_name cus_name' type="text" v-model="cusRow.CUS_NAME" disabled >
                               </p>
                            </label>
                        </div>
                        <div class="item_box">
                            <div class='gender'><p> &emsp; &emsp;性別</p>
                                <ul>
                                    <li>
                                        <input class='radio-input' name='gender' type="radio" id="male" value='男' disabled>
                                        <label for="male" class="radio-label">
                                            <span class="radio-button"></span>
                                            男性
                                        </label>
                                    </li>
                                    <li>
                                        <input class='radio-input' name='gender' type="radio" id="female" value='女' disabled>
                                        <label for="female" class="radio-label">
                                            <span class="radio-button"></span>
                                            女性
                                        </label>
                                    </li>
                                </ul>
                
                            </div>
                        </div>
                        <div class="item_box">
                            <label for="email"><p> &emsp; &emsp;帳號
                                <input id="email" name="my_email" class='mem_id' type="email" v-model='cusRow.EMAIL' disabled></p>
                            </label>
                        </div>
                        <div class="item_box">
                            <label><p>&ensp;連絡電話
                                <input id="cus_tel" name="cus_tel"  type="text" v-model=cusRow.CUS_TEL disabled maxlength="10"></p>
                            </label>
                        </div>
                        <div class="item_box">
                            <label><p>&ensp;連絡地址
                                <input id="cus_add" name="cus_add" class='memberLeft memberAdr' type="text" v-model=cusRow.CUS_ADD disabled></p>
                            </label>
                        </div>
                
                        <!-------新增取消修改-------->
                        <button id="btnCancel" type="button" class="btn_sub bl cancel" @click="getMemberInfo">取消修改</button>
                        <button id="btnSave" type="button" class="btn_sub br" @click="getMemberInfo">儲存修改</button>
                        <button id="btnChange" type="button" class="btn_sub br">修改會員資料</button>
                    </div>
                </div>
            </form>



            <!--------------------- 我是可愛分隔線 --------------------->

            <!-- 我是訂單區 ------------------------------->
            <div class="data_mem" v-if="p_order">
                <!-- <h3>商品訂單</h3> -->
                <div class="memberOrder">
                    <div class="memberOrderContent">
                        <div class="memberGrid">
                            <div class="memberGrid1">訂單編號</div>
                            <div class="memberGrid2">日期</div>
                            <div class="memberGrid3">金額</div>
                            <div class="memberGrid4">付款方式</div>
                            <div class="memberGrid5">付款狀態</div>
                            <div class="memberGrid6">貨運狀態</div>
                            <div class="memberGrid7">訂單狀態</div>
                            <div class="memberGrid8">收件人資訊</div>
                            <div class="memberGrid9"> 20220228 </div>
                            <div class="memberGrid10"> 2022-02-28 </div>
                            <div class="memberGrid11"> $111 </div>
                            <div class="memberGrid12"> 取貨付款 </div>
                            <div class="memberGrid13"> 已付款 </div>
                            <div class="memberGrid14"> 已出貨 </div>
                            <div class="memberGrid15"> 已完成 </div>
                            <div class="memberGrid16 memberReceiverID">詳細資訊</div>
                        </div>
                    </div>
            
                    <div class="memberProgressAll">
                        <div class="dot_box">
                            <!-- 訂單進度點點 -->
                            <div class="memberProgressDot">
                                <div>

                                </div>
                                <div class="memberProgressDot_even1"></div>
                                <div class="memberProgressDot_odd1"></div>
                                <div class="memberProgressDot_even2"></div>
                                <div class="memberProgressDot_odd2"></div>
                                <div class="memberProgressDot_even3"></div>
                                <div class="memberProgressDot_odd3 memberUnchecked"></div>
                            </div>
                            <!-- 訂單進度 -->
                            <div class="memberProgressWord">
                                <div class="memberWordCheck1">收到訂單</div>
                                <div class="memberWordCheck2">訂單確認</div>
                                <div class="memberWordCheck3">商品出貨</div>
                                <div class="memberWordCheck4">商品送達</div>
                            </div>
                        </div>
                        <!-- <div>
                            <button class="memberOpenDetail">查看明細</button>
                        </div> -->
                    </div>
                    <div class="memberOrderDetailHere">
                        <div class="memberOrderDetailAll">
                            <div class="memberOrderDetail">
                                <div class="memberOrderD1">
                                    <div>訂單詳情</div>
                                    <!-- <div>商品名稱</div>
                                    <div>數量</div>
                                    <div>價格</div> -->
                                </div>
                                <a href="product.html" class="memberOrderD2">
                                    <img src="img/index_product_2.jpg">
                                    <div>白日夢海綿架</div>
                                    <div>1件</div>
                                    <div>$490</div>
                                </a>
                                <a href="product.html" class="memberOrderD2">
                                    <img src="img/index_product_3.png">
                                    <div>小麋鹿木掛架</div>
                                    <div>1件</div>
                                    <div>$480</div>
                                </a>
                            </div>
                        </div>
                        
                    </div>
                
                    <!-- <div class="receiverDetail" style="display: none;">
                        <div>
                            <p>收件人姓名：<input disabled="" type="text" value=" 1 " style="border: 2px solid transparent;"></p>
                            <p>收件人電話：<input disabled="" type="text" value=" 1 " style="border: 2px solid transparent;"></p>
                            <p>收件人地址：<input disabled="" type="text" value=" 1 " style="border: 2px solid transparent;"></p>
                        </div>
                        <button class="">確認</button>
                    </div> -->
                
                </div>
            </div>
        </section>
        <!-- 會員資料顯示結束 ------------------------ -->

    </main>
    <!-- ------------ 我是Vue分隔線 ------------ -->
        <script >
            new Vue({
                el:'#mem_data',
                data:{
                    data:true, // 預設
                    p_order:false, // 預設
                    order:false, // 預設
                    cusRow:[{CUS_NO: '', EMAIL: '', CUS_NAME: '', CUS_TEL: '',SEX:''}],
                    gender:'',
                    cus_pic:'img/cus/emp_img.jpg', // 預設大頭貼
                },
                methods: {
                    getMemberInfo(){
                        let xhr = new XMLHttpRequest();
                        let thisVue = this;
                        xhr.onload = function(){
                            thisVue.cusRow = JSON.parse(xhr.responseText);
                            console.log(thisVue.cusRow);
                            if(thisVue.cusRow.CUS_PIC!=''){
                                thisVue.cus_pic = "img/cus/"+thisVue.cusRow.CUS_PIC; // 大頭貼路徑
                            }
                            // console.log(thisVue.cus_pic);
                            if(thisVue.cusRow.SEX == "女"){
                                $('#female').prop('checked',true);
                            }else if(thisVue.cusRow.SEX == "男"){
                                $('#male').prop('checked',true);
                            }   
                        }
                        xhr.open("get", "phps/getMemberInfo.php", true);
                        xhr.send(null);
                    },
                },
                mounted() {
                    this.getMemberInfo();
                },
            });
        </script>
<script src="js/member.js"></script>
</body>
</html>