<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @@include('layout/head.html')
    <link rel="stylesheet" href="css/activity.css">
    <title>活動與專欄</title>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</head>
<body>
    @@include('layout/header.html')

    <main>
        
        <section class="uni_banner">
			<div>
				<div class="pic">
					<img src="img/banner_roof.png" alt="屋頂">
				</div>
				<div class="txt">
					<h4>Activity</h4>
					<h1>活動與專欄</h1>
				</div>
			</div>
			<div>
				<div class="pic">
					<img src="img/act_banner.png" alt="banner圖">
				</div>
				
			</div>
		</section>
        
        <section class="activity" id="ActApp">
            <div class="acti_news" >
                <h2>活動</h2>
                <div class="acti_item">
                    <div class="img">
                        <img :src="'img/activity/'+ actRows[1].EVENT_IMG">
                    </div>
                    <div class="txt">
                        <h3>{{actRows[1].TITLE}}</h3>
                        <p>
                            {{actRows[1].CONTENT}}
                        </p> 
                        <p>{{actRows[1].START}}~{{actRows[1].END}}</p>
                        </div>
                        <div class="copy">
                            <input id="textArea" :value="actRows[1].COUPON"  readonly>
                            <button onclick="copyToClipBoard('textArea')"><span>複製</span></button>
                        </div>
                </div>
                <div class="acti_item">
                    <div class="img">
                        <img :src="'img/activity/'+ actRows[0].EVENT_IMG">
                    </div>
                    <div class="txt">
                        <h3>{{actRows[0].TITLE}}</h3>
                        <p>
                            {{actRows[0].CONTENT}}
                        </p> 
                        <p>{{actRows[0].START}}~{{actRows[0].END}}</p>
                    </div>                        
                        <div class="copy">
                            <input id="textArea2" :value="actRows[0].COUPON" readonly>
                            <button onclick="copyToClipBoard('textArea2')"><span>複製</span></button>
                        </div>  
                </div>
                <div class="acti_item">
                    <div class="img">
                        <img :src="'img/activity/'+ actRows[2].EVENT_IMG">
                    </div>
                    <div class="txt">
                        <h3>{{actRows[2].TITLE}}</h3>
                        <p>
                            {{actRows[2].CONTENT}}
                        </p> 
                        <p>{{actRows[2].START}}~{{actRows[2].END}}</p>
                    </div>                        
                        <div class="copy">
                            <input :value="actRows[2].COUPON" readonly id="textAreas3"/>
                            <button onclick="copyToClipBoard('textAreas3')"><span>複製</span></button>
                        </div>
                </div>
                
            </div>
            <div class="acti_columns">
                <h2>專欄</h2>
                <div class="col">
                    <div class="col_num">{{colRows[0].COLUMN_NO}}</div>
                    <a class="colNum" >
                        <div class="img">
                            <img :src="'img/activity/'+colRows[0].MAIN_PIC">
                        </div>
                    </a>
                    <div class="txt">
                        <a class="colNum txt_h3">
                            <h3>{{colRows[0].TOPIC}}</h3>
                        </a>
                         <div class="item">
                            <div class="item_img"><img :src="'img/'+colRows[0].AUTHOR_PIC"></div>
                            <div class="name">{{colRows[0].AUTHOR}}</div>
                        </div>
                        <p>{{colRows[0].CONTENT1}}</p>
                        <a class="colNum moreprd">more...</a>
                    </div>
                   
                </div>
                <div class="col">
                    <div class="col_num">{{colRows[1].COLUMN_NO}}</div>
                    <a class="colNum">
                        <div class="img">
                            <img :src="'img/'+colRows[1].MAIN_PIC">
                        </div>
                    </a>
                    <div class="txt">
                        <a class="colNum txt_h3">
                            <h3>{{colRows[1].TOPIC}}</h3>
                        </a>
                         <div class="item">
                            <div class="item_img"><img :src="'img/'+colRows[1].AUTHOR_PIC"></div>
                            <div class="name">{{colRows[1].AUTHOR}}</div>
                        </div>
                        <p>{{colRows[1].CONTENT1}}</p>
                        <a class="colNum moreprd">more...</a>
                    </div>
                   
                </div>
                <div class="col">
                    <div class="col_num">{{colRows[2].COLUMN_NO}}</div>
                    <a class="colNum" >
                        <div class="img">
                            <img :src="'img/activity/'+colRows[2].MAIN_PIC">
                        </div>
                    </a>
                    <div class="txt">
                        <a class="colNum txt_h3">
                            <h3>{{colRows[2].TOPIC}}</h3>
                        </a>
                         <div class="item">
                            <div class="item_img"><img :src="'img/'+colRows[2].AUTHOR_PIC"></div>
                            <div class="name">{{colRows[2].AUTHOR}}</div>
                        </div>
                        <p>{{colRows[2].CONTENT1}}</p>
                        <a class="colNum moreprd">more...</a>
                    </div>
                   
                </div>
                <div class="col">
                    <div class="col_num">{{colRows[3].COLUMN_NO}}</div>
                    <a class="colNum" >
                        <div class="img">
                            <img :src="'img/'+colRows[3].MAIN_PIC">
                        </div>
                    </a>
                    <div class="txt">
                        <a class="colNum txt_h3">
                            <h3>{{colRows[3].TOPIC}}</h3>
                        </a>
                         <div class="item">
                            <div class="item_img"><img :src="'img/'+colRows[3].AUTHOR_PIC"></div>
                            <div class="name">{{colRows[3].AUTHOR}}</div>
                        </div>
                        <p>{{colRows[3].CONTENT1}}</p>
                        <a class="colNum moreprd">more...</a>
                    </div>
                   
                </div>
                
            </div>
        </section>

    </main>

    @@include('layout/footer.html')

<script>
        new Vue({
                el:"#ActApp",
                data:{
                    actRows:[{COUPON: '', EVENT_IMG: '', TITLE: '', CONTENT: '', START: '',END: ''},
                        {COUPON: '', EVENT_IMG: '', TITLE: '', CONTENT: '', START: '',END: ''},
                        {COUPON: '', EVENT_IMG: '', TITLE: '', CONTENT: '', START: '',END: ''}],
                    colRows:[
                        {COLUMN_NO: '', AUTHER: '', AUTHER_PIC: '', DATE: '', TOPIC: '',CONTENT1: '',CONTENT2: '',MAIN_PIC: '',IMG1: '',IMG2: '',SUBTITLE_01: '',SUBTITLE_02: ''},
                        {COLUMN_NO: '', AUTHER: '', AUTHER_PIC: '', DATE: '', TOPIC: '',CONTENT1: '',CONTENT2: '',MAIN_PIC: '',IMG1: '',IMG2: '',SUBTITLE_01: '',SUBTITLE_02: ''},
                        {COLUMN_NO: '', AUTHER: '', AUTHER_PIC: '', DATE: '', TOPIC: '',CONTENT1: '',CONTENT2: '',MAIN_PIC: '',IMG1: '',IMG2: '',SUBTITLE_01: '',SUBTITLE_02: ''},
                        {COLUMN_NO: '', AUTHER: '', AUTHER_PIC: '', DATE: '', TOPIC: '',CONTENT1: '',CONTENT2: '',MAIN_PIC: '',IMG1: '',IMG2: '',SUBTITLE_01: '',SUBTITLE_02: ''}
                    ]
                },
                methods: {
                    getAct(){
                        let xhr = new XMLHttpRequest();
                        let thisVue = this;
                        xhr.onload = function(){
                            console.log(xhr.responseText);
                            thisVue.actRows = JSON.parse(xhr.responseText);
                        }
                        xhr.open("get","phps/selectAll.php?tableName=event", true);
                        xhr.send(null);
                    },
                    getCol(){
                        let xhr = new XMLHttpRequest();
                        let thisVue = this;
                        xhr.onload = function(){
                            console.log(xhr.responseText);
                            thisVue.colRows = JSON.parse(xhr.responseText);
					}
					xhr.open("get","phps/selectAll.php?tableName=columntable", true);
					xhr.send(null);
				}
                },
                mounted() {
                    this.getAct(),
                    this.getCol()
                },
            });
    
            
        function copyToClipBoard(p1) {

        var content = document.getElementById(p1);

        content.select();
        document.execCommand('copy');

        alert("已複製!");
        }
        $('.colNum').on("click",function(){
            console.log($(this));
            console.log($(this).closest('.col').children('.col_num'));
            console.log($(this).closest('.col').children('.col_num').text());
            let colNumb = $(this).closest('.col').children('.col_num').text();
            localStorage.setItem('colNumb',colNumb);
            window.location.href='columns.html';
        });
    </script>
</body>
</html>